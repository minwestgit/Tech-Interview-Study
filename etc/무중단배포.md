## 무중단 배포 방법

### 롤링 배포
**사용 중인 인스턴스 내에서 새 버전을 점진적으로 교체**하는 것.<br>
서비스 중인 인스턴스 하나를 로드밸런서에서 라우팅하지 않도록 한 뒤, 새 버전을 적용하여 다시 라우팅하도록 한다. 이를 반복하여 모든 인스턴스에 새 버전의 애플리케이션을 배포한다.

1. 로드밸런서는 배포된 서버에 연결을 일시적으로 끊는다.
2. 연결이 끊어진 서버에 새롭게 업데이트된 서버를 교체한다.
3. 교체가 완료되면 나머지 버전을 위와 같은 과정으로 업데이트 한다.

#### 장점
- 인스턴스마다 차례로 배포를 진행하기에 상황에 따라 손쉽게 롤백이 가능하다.
- 추가적인 인스턴스를 늘리지 않아도 된다.
- 간편한 관리

#### 단점
- 버전을 배포할때 인스턴스의 수가 감소하기 때문에 **사용중인 인스턴스에 트래픽이 몰릴 수 있다.** 즉, 서비스 처리 용량을 고려해야 한다. → 서버 과부하
- 배포가 진행될때 구버전과 신버전이 공존하기에 **호환성 문제**가 발생할 수 있다.
<br>

### Blue Green 배포
블루는 구버전, 그린은 신버전을 의미한다. 운영중인 구버전과 동일하게 신버전의 인스턴스를 구성한 후 **로드밸런서를 통해 모든 트래픽을 한번에 신버전 쪽으로 전환**하는 방식이다.

1. 서버를 그대로 본떠 하나의 새로운 서버를 만든다. (새로운 서버는 로드밸런서에 연결되어있지 않다.)
2. 새로운 서버 전체를 업데이트한다.
3. 기존 서버에 연결된 연결을 새로운 서버의 연결로 변경한다.

#### 장점
- 구버전의 인스턴스가 그대로 남아있어서 손쉬운 롤백이 가능하다.
- 구버전의 환경을 다음 배포에 재사용할 수 있다.
- 운영환경에 영향을 주지 않고 새 버전 테스트 가능.

#### 단점
- 시스템 자원이 두배로 필요하다. 
- 비용 문제 발생
